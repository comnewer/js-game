(()=>{"use strict";var t={902:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(81),r=s.n(i),h=s(645),a=s.n(h)()(r());a.push([t.id,"*{\r\n    margin: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n}\r\n#canvas1{\r\n    border: 5px solid black;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    max-width: 100%;\r\n    max-height: 100%;\r\n}",""]);const n=a},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",i=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),i&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),i&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,i,r,h){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var n=0;n<this.length;n++){var d=this[n][0];null!=d&&(a[d]=!0)}for(var o=0;o<t.length;o++){var p=[].concat(t[o]);i&&a[p[0]]||(void 0!==h&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=h),s&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=s):p[2]=s),r&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=r):p[4]="".concat(r)),e.push(p))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function s(t){for(var s=-1,i=0;i<e.length;i++)if(e[i].identifier===t){s=i;break}return s}function i(t,i){for(var h={},a=[],n=0;n<t.length;n++){var d=t[n],o=i.base?d[0]+i.base:d[0],p=h[o]||0,l="".concat(o," ").concat(p);h[o]=p+1;var c=s(l),u={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==c)e[c].references++,e[c].updater(u);else{var m=r(u,i);i.byIndex=n,e.splice(n,0,{identifier:l,updater:m,references:1})}a.push(l)}return a}function r(t,e){var s=e.domAPI(e);return s.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;s.update(t=e)}else s.remove()}}t.exports=function(t,r){var h=i(t=t||[],r=r||{});return function(t){t=t||[];for(var a=0;a<h.length;a++){var n=s(h[a]);e[n].references--}for(var d=i(t,r),o=0;o<h.length;o++){var p=s(h[o]);0===e[p].references&&(e[p].updater(),e.splice(p,1))}h=d}}},569:t=>{var e={};t.exports=function(t,s){var i=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,s)=>{t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var r=void 0!==s.layer;r&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,r&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var h=s.sourceMap;h&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(h))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function s(i){var r=e[i];if(void 0!==r)return r.exports;var h=e[i]={id:i,exports:{}};return t[i](h,h.exports,s),h.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),s.nc=void 0,(()=>{const t={SITTING:0,RUNNING:1,JUMPING:2,FALLING:3,ROLLING:4,DIVING:5,HIT:6,FIREROLLING:7,FIREDIVING:8},e={FIRE:1,HAS_A_LANDING:2,ON_GROUND:4,JUST_COLLIDED:8},i=[4,8,6,6,6,6,10,6,6],r=[5,3,1,2,6,6,4,6,6],h=500,a=1500,n=4e3;class d{constructor(t){this.state=t}enter(t){}inputHandle(t,e,s){}}const o=[new class extends d{constructor(){super("SITTING")}enter(e){e.sprite.maxFrame=i[t.SITTING],e.sprite.frameX=0,e.sprite.frameY=r[t.SITTING]}inputHandle(e,s,i){return e.includes("ArrowRight")||e.includes("ArrowLeft")?t.RUNNING:e.includes("Enter")&&i.fireReady?t.FIREROLLING:e.includes("Enter")?t.ROLLING:e.includes("ArrowUp")?t.JUMPING:void 0}},new class extends d{constructor(){super("RUNNING")}enter(e){e.sprite.maxFrame=i[t.RUNNING],e.sprite.frameX=0,e.sprite.frameY=r[t.RUNNING]}inputHandle(e,s,i){return e.includes("ArrowLeft")?i.speedX=-500:e.includes("ArrowRight")?i.speedX=h:i.speedX=0,e.includes("ArrowUp")?t.JUMPING:e.includes("Enter")&&i.fireReady?t.FIREROLLING:e.includes("Enter")?t.ROLLING:e.includes("ArrowDown")?t.SITTING:void 0}},new class extends d{constructor(){super("JUMPING")}enter(e){e.sprite.maxFrame=i[t.JUMPING],e.speedY=-1e3,e.sprite.frameX=0,e.sprite.frameY=r[t.JUMPING]}inputHandle(e,s,i){const r=.001*s;return i.speedY+=n*r,e.includes("ArrowLeft")?i.speedX=-500:e.includes("ArrowRight")?i.speedX=h:i.speedX=0,e.includes("ArrowUp")&&(i.speedY+=-2e3*r),i.speedY>=0?t.FALLING:e.includes("Enter")&&i.fireReady?t.FIREROLLING:e.includes("Enter")?t.ROLLING:e.includes("ArrowDown")&&i.fireReady?t.FIREDIVING:e.includes("ArrowDown")?t.DIVING:void 0}},new class extends d{constructor(){super("FALLING")}enter(e){e.sprite.maxFrame=i[t.FALLING],e.sprite.frameX=0,e.sprite.frameY=r[t.FALLING]}inputHandle(e,s,i){const r=.001*s;return i.speedY+=n*r,e.includes("ArrowLeft")?i.speedX=-500:e.includes("ArrowRight")?i.speedX=h:i.speedX=0,i.onGround?t.RUNNING:e.includes("Enter")&&i.fireReady?t.FIREROLLING:e.includes("Enter")?t.ROLLING:e.includes("ArrowDown")&&i.fireReady?t.FIREDIVING:e.includes("ArrowDown")?t.DIVING:void 0}},new class extends d{constructor(){super("ROLLING")}enter(e){e.sprite.maxFrame=i[t.ROLLING],e.sprite.frameX=0,e.sprite.frameY=r[t.ROLLING],e.speedX=a,e.speedY=0}inputHandle(e,s,i){const r=.001*s;return i.speedX+=-6e3*r,i.speedX<=h&&i.onGround?t.RUNNING:i.speedX<=h&&!i.onGround?t.FALLING:void 0}},new class extends d{constructor(){super("DIVING")}enter(e){e.sprite.maxFrame=i[t.DIVING],e.sprite.frameX=0,e.sprite.frameY=r[t.DIVING],e.speedY=a}inputHandle(e,s,i){if(i.onGround)return t.RUNNING}},new class extends d{constructor(){super("HIT")}enter(e){e.sprite.maxFrame=i[t.HIT],e.sprite.frameX=0,e.sprite.frameY=r[t.HIT],e.speedX=0}inputHandle(e,s,r){const h=.001*s;return r.onGround||(r.speedY+=n*h),r.sprite.frameX>=i[t.HIT]&&r.onGround?t.RUNNING:r.sprite.frameX>=i[t.HIT]&&!r.onGround?t.FALLING:void 0}},new class extends d{constructor(){super("FIREROLLING")}enter(e){e.sprite.maxFrame=i[t.FIREROLLING],e.sprite.frameX=0,e.sprite.frameY=r[t.FIREROLLING],e.speedX=a,e.speedY=0,e.fireReady=!1}inputHandle(e,s,i){const r=.001*s;return i.speedX+=-6e3*r,i.speedX<=h&&i.onGround?t.RUNNING:i.speedX<=h&&!i.onGround?t.FALLING:void 0}},new class extends d{constructor(){super("FIREDIVING")}enter(e){e.sprite.maxFrame=i[t.FIREDIVING],e.sprite.frameX=0,e.sprite.frameY=r[t.FIREDIVING],e.speedY=a,e.fireReady=!1}inputHandle(e,s,i){if(i.onGround)return t.RUNNING}}],p=s.p+"754d7ce7816e09d94441f77d3e52e8e8.png";class l{constructor(t=new Image,e=0,s=0){this.image=t,this.spriteWidth=e,this.spriteHeight=s,this.width=e,this.height=s,this.frameX=0,this.frameY=0,this.maxFrame=0,this.x=0,this.y=0,this.fps=20,this.frameTimer=0}#t(){return 1e3/this.fps}draw(t){t.drawImage(this.image,this.frameX*this.spriteWidth,this.frameY*this.spriteHeight,this.spriteWidth,this.spriteHeight,this.x,this.y,this.width,this.height)}update(t){this.frameTimer>=this.#t()?(this.frameX<this.maxFrame?this.frameX++:this.frameX=0,this.frameTimer=0):this.frameTimer+=t}}class c{constructor(t=0,e=0,s=0,i=0){this.x=t,this.y=e,this.width=s,this.height=i,this.speedX=0,this.speedY=0,this.ax=0,this.ay=0,this.dx=0,this.dy=0,this.maredForDeletion=!1}update(t=0){const e=.001*t;this.speedX+=this.ax*e,this.speedY+=this.ay*e,this.x+=this.speedX*e,this.y+=this.speedY*e}draw(t){t.strokeRect(this.x+this.dx,this.y+this.dy,this.width,this.height)}}class u extends c{constructor(t,e,s){super(),this.game=t,this.sizeModifier=Math.random()+.5,this.markedForDeletion=!1;const i=new Image;i.src=p,this.sprite=new l(i,100,90),this.sprite.width=this.sprite.spriteWidth*this.sizeModifier,this.sprite.height=this.sprite.spriteHeight*this.sizeModifier,this.sprite.x=e-.5*this.sprite.width,this.sprite.y=s-.5*this.sprite.height,this.sprite.maxFrame=4,this.sprite.fps=15,this.x=this.sprite.x,this.y=this.sprite.y}draw(t){this.sprite.draw(t)}update(t=0){super.update(t),this.sprite.frameX>=this.sprite.maxFrame&&(this.markedForDeletion=!0),this.sprite.x=this.x,this.sprite.update(t)}}const m=s.p+"e2f520a5eca9f27e210d63a14ba68e93.png";class g extends c{constructor(s){super(.25*s.width,s.height-91.3-s.groundMargin,100,91.3),this.game=s,this.dx=.25*this.width,this.dy=.3*this.height;const i=new Image;i.src=m,this.sprite=new l(i,100,91.3),this.stateIndexs=t,this.states=o,this.currentState=o[t.RUNNING],this.currentState.enter(this),this.width=.6*this.width,this.height=.55*this.height,this.flags=e.FIRE,this.fireInterval=2e3,this.fireTimer=0}draw(t){this.game.debug&&super.draw(t),this.sprite.draw(t)}update(e,s,i=!1){i&&this.currentState!==o[t.FIREROLLING]&&this.currentState!==o[t.FIREDIVING]&&this.setState(t.HIT);let r=this.currentState.inputHandle(e,s,this);this.setState(r,-1),super.update(s),this.x<0?this.x=0:this.x>this.game.width-this.sprite.width&&(this.x=this.game.width-this.sprite.width),this.y>=this.game.height-this.sprite.height-this.game.groundMargin?(this.y=this.game.height-this.sprite.height-this.game.groundMargin,this.onGround=!0):this.onGround=!1,this.onGround&&this.currentState===this.states[t.FIREDIVING]&&(this.justLanded=!0),this.sprite.x=this.x,this.sprite.y=this.y,this.sprite.update(s),this.fireReady||(this.fireTimer+=s,this.fireTimer>=this.fireInterval&&(this.fireReady=!0,this.fireTimer=0))}setState(e,s=0){void 0!==e&&e!==t.SITTING&&(this.currentState=this.states[e],this.currentState.enter(this))}get fireReady(){return!!(this.flags&e.FIRE)}get justLanded(){return!!(this.flags&e.HAS_A_LANDING)}get onGround(){return!!(this.flags&e.ON_GROUND)}get justCollided(){return!!(this.flags&e.JUST_COLLIDED)}set fireReady(t=!0){t?this.flags|=e.FIRE:this.flags&=~e.FIRE}set justLanded(t=!0){t?this.flags|=e.HAS_A_LANDING:this.flags&=~e.HAS_A_LANDING}set onGround(t=!0){t?this.flags|=e.ON_GROUND:this.flags&=~e.ON_GROUND}set justCollided(t=!0){t?this.flags|=e.JUST_COLLIDED:this.flags&=~e.justCollided}}const f=(t=>{const e=[],s=Object.keys(t);for(let i=0;i<s.length;++i)e.push(t[s[i]]);return e})({LEFT_KEY:"ArrowLeft",RIGHT_KEY:"ArrowRight",UP_KEY:"ArrowUp",DOWN_KEY:"ArrowDown",RUSH_KEY:"Enter",RESTART_KEY:"r",PAUSE_KEY:"Escape"});class y{constructor(t){this.keys=[],this.game=t,window.addEventListener("keydown",(t=>{f.includes(t.key)&&!this.keys.includes(t.key)?this.keys.push(t.key):"d"===t.key&&(this.game.debug=!this.game.debug)})),window.addEventListener("keyup",(t=>{f.includes(t.key)&&this.keys.includes(t.key)&&this.keys.splice(this.keys.indexOf(t.key),1)}))}}const w=s.p+"dba8e2791bf4301ac3a65b6277b78773.png",I=s.p+"55fd3a2d3ecfee01650b7a7f8385b39e.png",x=s.p+"ce47dff3cdcd83ffb8dd4ecfa7fbaf3b.png",N=s.p+"75177e0329b4cf7ff4dbf0eadaff9c3e.png",v=s.p+"e975f28d7fe3d467bea186e6a4953893.png";class G extends c{constructor(t,e,s,i=0,r,h=0){super(0,0,e,s),this.game=t,this.speedX=i,this.ax=h,this.image=r}update(t=0){super.update(t),this.x<-this.width&&(this.x+=this.width),this.x>0&&(this.x-=this.width)}draw(t){t.drawImage(this.image,this.x,this.y,this.width,this.height),t.drawImage(this.image,this.x+this.width,this.y,this.width,this.height)}}class R{constructor(t,e,s){this.game=t,this.width=1667,this.height=500,this.layer1image=new Image,this.layer1image.src=w,this.layer2image=new Image,this.layer2image.src=I,this.layer3image=new Image,this.layer3image.src=x,this.layer4image=new Image,this.layer4image.src=N,this.layer5image=new Image,this.layer5image.src=v,this.layer1=new G(t,this.width,this.height,0*e,this.layer1image,s),this.layer2=new G(t,this.width,this.height,.2*e,this.layer2image,s),this.layer3=new G(t,this.width,this.height,.4*e,this.layer3image,s),this.layer4=new G(t,this.width,this.height,.8*e,this.layer4image,s),this.layer5=new G(t,this.width,this.height,1*e,this.layer5image,s),this.backgroundLayers=[this.layer1,this.layer2,this.layer3,this.layer4,this.layer5]}update(t){this.backgroundLayers.forEach((e=>{e.update(t)}))}draw(t){this.backgroundLayers.forEach((e=>{e.draw(t)}))}}const L=s.p+"7f97c83004ad56e526067cc1dca24436.png",F=s.p+"73ca5388bb253de3b22c31f87f600d60.png",E=s.p+"a0dac6835460ddcde34bc005cd03cef8.png";class b extends c{constructor(t,e=0,s=0,i=0,r=0,h=new l){super(e,s,i,r),this.sprite=h,this.game=t}draw(t){this.game.debug&&super.draw(t),this.sprite.draw(t)}update(t){super.update(t),this.sprite.x=this.x,this.sprite.y=this.y,this.sprite.update(t),this.x<-this.width&&(this.markedForDeletion=!0)}}class T extends b{constructor(t){let e=t.width,s=.5*(t.height-44)*Math.random();const i=new Image;i.src=L,super(t,e,s,60,44,new l(i,60,44)),this.game=t,this.dx=9,this.dy=6.6,this.width=36,this.height=.7*44,this.speedX=-(100*Math.random()+400),this.sprite.maxFrame=5,this.angle=0,this.va=100*Math.random()+100}update(t){const e=.001*t;this.angle+=this.va*e,this.y+=Math.sin(this.angle),super.update(t)}}class S extends b{constructor(t){let e=t.width,s=t.height-87-t.groundMargin;const i=new Image;i.src=F,super(t,e,s,60,87,new l(i,60,87)),this.game=t,this.dx=3,this.width=54,this.dy=87*.1,this.height=78.3,this.sprite.maxFrame=1}update(t){super.update(t)}}class X extends b{constructor(t){let e=t.width,s=.5*t.height*Math.random();const i=new Image;i.src=E,super(t,e,s,120,144,new l(i,120,144)),this.dy=.3*144,this.dx=24,this.height=79.2,this.width=72,this.speedY=Math.random()>.4?100:-100,this.sprite.maxFrame=5}draw(t){super.draw(t),t.beginPath(),t.moveTo(this.x+.5*this.sprite.width,0),t.lineTo(this.x+.5*this.sprite.width,this.y+.3*this.sprite.height),t.stroke()}update(t){super.update(t),this.y>this.game.height-this.height-this.game.groundMargin&&(this.speedY=-Math.abs(this.speedY)),this.y<-this.height&&(this.markedForDeletion=!0)}}class A{constructor(t){this.game=t,this.fontSize=30,this.fontFamily="Helvetica"}draw(t){t.save(),t.shadowOffsetX=2,t.shadowOffsetY=2,t.shadowColor="white",t.shadowBlur=0,t.font=this.fontSize+"px "+this.fontFamily,t.textAlign="left",t.fillStyle=this.game.fontColor,t.fillText("Score: "+this.game.score,20,50),t.font=.8*this.fontSize+"px "+this.fontFamily,t.fillText("Time: "+(.001*this.game.time).toFixed(1),20,80),this.game.gameOver&&(t.textAlign="left",t.font=1.5*this.fontSize+"px "+this.fontFamily,this.game.win?(t.fillText("WIN!!!",.3*this.game.width,.4*this.game.height),t.font=.7*this.fontSize+"px "+this.fontFamily,t.fillText('You kept alive. Press "R" to play again .',.3*this.game.width,.4*this.game.height+40)):(t.fillText("LOSE?",.3*this.game.width,.4*this.game.height),t.font=.7*this.fontSize+"px "+this.fontFamily,t.fillText('Press "R" to try again. Better Luck next time',.3*this.game.width,.4*this.game.height+40))),t.restore()}}const D=s.p+"aeb0e95fddb13eac96a00c69999dd3e9.png";class O extends c{constructor(t){super(),this.game=t,this.markedForDeletion=!1,this.x=0,this.y=0,this.speedX=0,this.speedY=0,this.size=0}update(t){super.update(t),this.size*=.9,this.size<.5&&(this.markedForDeletion=!0)}}class M extends O{constructor(t,e,s){super(t),this.x=e,this.y=s,this.size=15*Math.random()+5,this.speedX=200*-Math.random(),this.speedY=100*Math.random(),this.color="rgba(0,0,0,0.2)"}draw(t){t.beginPath(),t.arc(this.x,this.y,this.size,0,2*Math.PI),t.fillStyle=this.color,t.fill()}}class k extends O{constructor(t,e,s,i=50*Math.random()+50){super(t),this.x=e,this.y=s,this.image=new Image,this.image.src=D,this.speedX=100,this.speedY=100,this.size=i,this.angle=0,this.va=20*Math.random()-10}update(t){const e=.001*t;super.update(t),this.angle+=this.va*e}draw(t){t.save(),t.translate(this.x,this.y),t.rotate(this.angle),t.drawImage(this.image,.5*-this.size,.5*-this.size,this.size,this.size),t.restore()}}class Y extends O{constructor(t,e,s,i=100*Math.random()+100){super(t),this.size=i,this.x=e,this.y=s,this.speedX=600*Math.random()-300,this.speedY=200*Math.random()+200,this.gravity=0,this.image=new Image,this.image.src=D}update(t){const e=.001*t;super.update(t),this.gravity+=10*e,this.y+=this.gravity*e}draw(t){t.save(),t.globalAlpha=.5,t.drawImage(this.image,this.x,this.y,this.size,this.size),t.restore()}}var U=s(379),H=s.n(U),_=s(795),z=s.n(_),C=s(569),P=s.n(C),V=s(565),j=s.n(V),J=s(216),K=s.n(J),W=s(589),Z=s.n(W),B=s(902),$={};$.styleTagTransform=Z(),$.setAttributes=j(),$.insert=P().bind(null,"head"),$.domAPI=z(),$.insertStyleElement=K(),H()(B.Z,$),B.Z&&B.Z.locals&&B.Z.locals;class q{constructor(t,e){this.gameInitSpeed=500,this.playerInitX=.25*t,this.playerInitY=e-91.3-80,this.inityInterval=1e3,this.width=t,this.height=e,this.speed=500,this.ax=0,this.groundMargin=80,this.debug=!1,this.score=0,this.fontColor="black",this.time=1e5,this.gameOver=!1,this.win=!1,this.player=new g(this),this.player.x=this.playerInitX,this.player.y=this.playerInitY,this.input=new y(this),this.UI=new A(this),this.background=new R(this,-this.speed,-this.ax),this.enemies=[],this.particles=[],this.collisions=[],this.enemyTimer=0,this.enemyInterval=this.inityInterval,this.enemyIntervalAdd=5}update(t){this.enemyInterval-=this.enemyIntervalAdd*t*.001,this.speed+=this.ax*t*.001,this.time-=t,this.time<=0&&(this.gameOver=!0,this.win=!0),this.background.update(t);let e=this.enemies.some((t=>{if(this.checkCollision(t,this.player))return t.markedForDeletion=!0,!0}));if(e&&(this.player.currentState===this.player.states[this.player.stateIndexs.FIREROLLING]||this.player.currentState===this.player.states[this.player.stateIndexs.FIREDIVING]?this.score++:(this.gameOver=!0,this.win=!1)),this.player.update(this.input.keys,t,e),this.enemyTimer>this.enemyInterval?(this.addEnemy(),this.enemyTimer=0):this.enemyTimer+=t,e){let t=new u(this,this.player.x+.5*this.player.sprite.width,this.player.y+.5*this.player.sprite.height);t.speedX=-this.speed,t.ax=-this.ax,this.collisions.push(t)}if(this.player.currentState===this.player.states[this.player.stateIndexs.RUNNING]){let t=new M(this,this.player.x+.5*this.player.sprite.width,this.player.y+.8*this.player.sprite.height);t.speedX=-this.speed,t.ax=-this.ax,this.particles.push(t)}if(this.player.fireReady){let t=new Y(this,this.player.x+Math.random()*this.player.sprite.width*.5,this.player.y+Math.random()*this.player.sprite.height*.5,20*Math.random()+20);t.speedX=-this.speed,t.ax=-this.ax,this.particles.push(t)}if(this.player.justLanded){for(let t=0;t<20;++t){let t=new Y(this,this.player.x+.5*this.player.sprite.width,this.player.y);t.speedX=-this.speed,t.ax=-this.ax,this.particles.push(t)}this.player.justLanded=!1}if(this.player.currentState===this.player.states[this.player.stateIndexs.FIREROLLING]||this.player.currentState===this.player.states[this.player.stateIndexs.FIREDIVING])for(let t=0;t<5;++t){let t=new k(this,this.player.x+.6*this.player.sprite.width,this.player.y+.58*this.player.sprite.height);t.speedX=-this.speed,t.ax=-this.ax,this.particles.push(t)}this.enemies.forEach((e=>{e.update(t)})),this.enemies=this.enemies.filter((t=>!t.markedForDeletion)),this.particles.forEach(((e,s)=>{e.update(t),e.markedForDeletion&&this.particles.splice(s,1)})),this.collisions.forEach(((e,s)=>{e.update(t),e.markedForDeletion&&this.collisions.splice(s,1)}))}draw(t){this.background.draw(t),this.player.draw(t),this.enemies.forEach((e=>{e.draw(t)})),this.particles.forEach((e=>{e.draw(t)})),this.collisions.forEach((e=>{e.draw(t)})),this.UI.draw(t)}addEnemy(){let t=Math.random();if(t>.66){let t=new S(this);t.speedX=-this.speed,t.ax=-this.ax,this.enemies.push(t)}else if(t>.33){let t=new X(this);t.speedX=-this.speed,t.ax=-this.ax,this.enemies.push(t)}else{let t=new T(this);t.speedX=1.5*-this.speed,t.ax=1.5*-this.ax,this.enemies.push(t)}}checkCollision(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}onGround(t){return t.sprite.y>=this.height-t.sprite.height-this.groundMargin}reStart(){this.speed=this.gameInitSpeed,this.ax=0,this.debug=!1,this.score=0,this.gameOver=!1,this.win=!1,this.player=new g(this),this.player.x=this.playerInitX,this.player.y=this.playerInitY,this.input=new y(this),this.UI=new A(this),this.background=new R(this,-this.speed,-this.ax),this.enemies=[],this.particles=[],this.collisions=[],this.enemyTimer=0,this.enemyInterval=this.inityInterval}}window.addEventListener("load",(function(){const t=this.document.createElement("canvas");t.id="canvas1",this.document.getElementsByTagName("body")[0].appendChild(t);const e=t.getContext("2d");t.width=800,t.height=500;const s=new q(t.width,t.height);let i=0;!function r(h=0){const a=h-i;i=h,s.gameOver?s.input.keys.includes("r")&&s.reStart():(e.clearRect(0,0,t.width,t.height),s.update(a),s.draw(e)),requestAnimationFrame(r)}()}))})()})();